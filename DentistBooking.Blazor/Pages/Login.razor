@page "/login"
@using DentistBooking.Blazor.Services.Users
@using DentistBooking.ViewModels.System.Users
@inject NavigationManager NavigationManager;
@inject IUserService userService;

<h3>Login</h3>
<div class="card">
    <div class="card-body">
        <h5 class="card-title-login">
            <EditForm Model=@Model>
                <DataAnnotationsValidator></DataAnnotationsValidator>
                <ValidationSummary></ValidationSummary>
                <div class="form-group">
                    <label for="username">
                        User name
                    </label>
                    <InputText id="username" class="form-control" @bind-Value="Model.UserName"></InputText>
                    <ValidationMessage For="()=> Model.UserName"></ValidationMessage>

                </div>
                <div class="form-group">
                    <label for="password">
                        Password
                    </label>
                    <InputText id="password" type="password" class="form-control" @bind-Value="Model.Password"></InputText>
                    <ValidationMessage For="()=> Model.Password"></ValidationMessage>

                </div>
                <button type="submit" class="btn btn-success">Login</button>
            </EditForm>
        </h5>
    </div>
</div>
@code {
    public LoginRequest Model = new LoginRequest();
    public async Task HandleLogin()
    {
        var rs =await userService.Login(Model);
        if (rs.Successful)
        {
            NavigationManager.NavigateTo("");
        }
        else
        {
            Console.WriteLine("success");
        }

    }
}
